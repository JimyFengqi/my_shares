# -*- coding: utf-8 -*-

'''
运行本程序,需要
python3,linux环境
1.安装selenium,
2.谷歌浏览器,跟谷歌浏览器配套的chromedriver
3.geckodriver
4.安装tushare, pandas模块

'''
import tushare as ts
from selenium import webdriver
from selenium.webdriver.chrome.options import Options
import time
import pandas as pd
#导入本地IP池


#虚拟浏览器,没有实体
def simulator_driver():
    chrome_options = Options()
    chrome_options.add_argument('--headless')
    chrome_options.add_argument('--disable-gpu')
    driver = webdriver.Chrome(chrome_options=chrome_options)
    return driver
#模拟手机浏览器,这里模拟的是安卓4.2.1    
def mobile_driver():
    mobile_emulation = {"deviceMetrics": {"width": 750, "height": 1334, "pixelRatio": 6.0}, # 定义设备高宽，像素比
                    "userAgent": "Mozilla/5.0 (Linux; Android 4.2.1; en-us; Nexus 5 Build/JOP40D) " # 通过user agent代理来模拟
                    "AppleWebKit/535.19 (KHTML, like Gecko) Chrome/18.0.1025.166 Mobile Safari/535.19"}
    chrome_options = Options() 
    chrome_options.add_argument('disable-infobars')
    chrome_options.add_experimental_option("mobileEmulation", mobile_emulation)
    driver = webdriver.Chrome(chrome_options = chrome_options) 
    return driver


#获取股票代码以及名字
def get_shares_code():
    basic=ts.get_stock_basics()
    code_list=basic.index.tolist()#通过其索引得到股票代码
    code_name=basic['name'].tolist()#得到里面的name元素,即股票名称
    return code_list,code_name
#得到股票代码,股票名字,并定义必须元素    
code_list,code_name=get_shares_code()


code_list=['601518', '600050', '300333', '300293', '002856', '000935', '300565', '603733', '603496', '002338', '600303', '603301', '603809', '603773', '002931', '603876', '300718', '300693', '300634', '300597', '300667', '300348', '603378', '002806', '002651', '603099', '300366', '600853', '002052', '002192', '600338', '000407', '300419', '603429', '300504', '002802', '002579', '000928', '300598', '603009', '002881', '600776', '300537', '300730', '300715', '002543', '300615', '603396', '603679', '600071', '002863', '002808', '002093', '300465', '002553', '600237', '603890', '300134', '300231', '603016', '603897', '002899', '002819', '300487', '002395', '002549', '603506', '600275', '600680', '300492', '002832', '002070', '600468', '603079', '002362', '002930', '002148', '002235', '000818', '002401', '603559', '300494', '603278', '002321', '000413', '300276', '603356', '000797', '600610', '002691', '300560', '300472', '600533', '000725', '300020', '300653', '603322', '300716', '300488', '600370', '300657', '603076', '300481', '002626', '600851', '002864', '603638', '002194', '002158', '300503', '000875', '000651', '603516', '002892', '300635', '600797', '300540', '002467', '002006', '601100', '300738', '002740', '002230', '002679', '000043', '603305', '002333', '601858', '600561', '300727', '002390', '603042', '300686', '603080', '600728', '600090', '603958', '300374', '603160', '300710', '300268', '600881', '300152', '002270', '601208', '002871', '300473', '600422', '603722', '300349', '002685', '002851', '002559', '603399', '000835', '300122', '600333', '300740', '300310', '600487', '002001', '300460', '002782', '300720', '000869', '000910', '300684', '300698', '600833', '002032', '600330', '600628', '300644', '603868', '002068', '600062', '002278', '002893', '600188', '002460', '603828', '002181', '000848', '601003', '300341', '002921', '000656', '002912', '600596', '603058', '603367', '002314', '002110', '600654', '002889', '002224', '300322', '603214', '603929', '603895', '600584', '002830', '300689', '603856', '300399', '300379', '600808', '002747', '002640', '603286', '600239', '002510', '300356', '002759', '300522', '300467', '300542', '603685', '600190', '600405', '300340', '300436', '002508', '002350', '000971', '600136', '603138', '000037', '600727', '002175', '002088', '300388', '002929', '300180', '002888', '600340', '300733', '002265', '300680', '002788', '603329', '000547', '600958', '000976', '002737', '000733', '600461', '600521', '300702', '601211', '300670', '300512', '600686', '300682', '300368', '600593', '002781', '601688', '603721', '300107', '603499', '000046', '600260', '002922', '600317', '600985', '600279', '300624', '000611', '600298', '002177', '601336', '603288', '000151', '600080', '300608', '300700', '600203', '600600', '300723', '002500', '603133', '603161', '000906', '300638', '600634', '300705', '603383', '601101', '603229', '300717', '600789', '300155', '002184', '300150', '000678', '002365', '300148', '600308', '600933', '601678', '600107', '600348', '300725', '600288', '603917', '300643', '000676', '000410', '002925', '002536', '002233', '002466', '603067', '600180', '000958', '300534', '000627', '600796', '600888', '002875', '002115', '600113', '002267', '601908', '002895', '300736', '601666', '300357', '002909', '002355', '000700', '002853', '600093', '603612', '002680', '002396', '300735', '002878', '300423', '600516', '002873', '002146', '000983', '600282', '600869', '600426', '603599', '300652', '600810', '603683', '002415', '000717', '601636', '002123', '603912', '603277', '603829', '002752', '000001', '600410', '601369', '300668', '600536', '603655', '300707', '600868', '002900', '002896', '000728', '002587', '002513', '600053', '002767', '603136', '002927', '300074', '300582', '000953', '000830', '000789', '300213', '002487', '600332', '600100', '603059', '002209', '300299', '601699', '002546', '002029', '300396', '002326', '600323', '002021', '603533', '600031', '002842', '300541', '300678', '600218', '603260', '603709', '002860', '300677', '600358', '600872', '603098', '600690', '600215', '600898', '603032', '300463', '600522', '002530', '600603', '300469', '002837', '300650', '300450', '601116', '603031', '600983', '002509', '300079', '000925', '601398', '002017', '000936', '002109', '603365', '002084', '300563', '600740', '600619', '603321', '601006', '002882', '603089', '000732', '000532', '600609', '600229', '002391', '603920', '300003', '002566', '300711', '600530', '002097', '300536', '600887', '300511', '603110', '002816', '603156', '603936', '002885', '002102', '000822', '002887', '002846', '000058', '603335', '000881', '600213', '603369', '300660', '300250', '300412', '300599', '600971', '300591', '002030', '002547', '603289', '600143', '002733', '603577', '300052', '300737', '600160', '000050', '600640', '000898', '000510', '002117', '300058', '300673', '002236', '300713', '002869', '603648', '601229', '000761', '603628', '600418', '000682', '600804', '300561', '000513', '300343', '002911', '300395', '300551', '002197', '603106', '600249', '601601', '600901', '300719', '002879', '600068', '000862', '000525', '300496', '600030', '002205', '002127', '300241', '002849', '000932', '300377', '601966', '603357', '300160', '300699', '603607', '600781', '300595', '601872', '601628', '300227', '600251', '002594', '002440', '000631', '000039', '600793', '601318', '600722', '300701', '000960', '300509', '600381', '002397', '300462', '600137', '600497', '002517', '600436', '603639', '603817', '000333', '600837', '600300', '600141', '600365', '300295', '002055', '002848', '300292', '002379', '600173', '300554', '600155', '601155', '600066', '601880', '600578', '300731', '600320', '300123', '300380', '300216', '600755', '600175', '002917', '601890', '000655', '300381', '002446', '000993', '300389', '603888', '603680', '002038', '002603', '603157', '601566', '002698', '002137', '600963', '002116', '000790', '603928', '300602', '300301', '300618', '002843', '600483', '300528', '603966', '600120', '601168', '600721', '603916', '600126', '300130', '600230', '002891', '300741', '600704', '300442', '300579', '600291', '300681', '600720', '600020', '000852', '002476', '600373', '600621', '603879', '001896', '000803', '300732', '000756', '600185', '603299', '600791', '002319', '002736', '002353', '300274', '002897', '600366', '300189', '603767', '002412', '603050', '600243', '300030', '002665', '600529', '600048', '601238', '603015', '300249', '002315', '603703', '600929', '600196', '002229', '002024', '603557', '000429', '601009', '300230', '002700', '002670', '601881', '300632', '600645', '600326', '601016', '603300', '600829', '002218', '000735', '603118', '300687', '000931', '000996', '603881', '601519', '600841', '600125', '600433', '300378', '002313', '002494', '600604', '002339', '002162', '002540', '600302', '002369', '002485', '002014', '600884', '601001', '600277', '002431', '000811', '000573', '601985', '002753', '600667', '600739', '002216', '002514', '601005', '600503', '002749', '600132', '603688', '000059', '603026', '002689', '002429', '300559', '603123', '603811', '300070', '603578', '601225', '002370', '603663', '002883', '600854', '002926', '601258', '600250', '603778', '603218', '600283', '002818', '002399', '600112', '002789', '300203', '601999', '002193', '600758', '600077', '600207', '300099', '002208', '600228', '300245', '603111', '603586', '600478', '601375', '002141', '600109', '300452', '603718', '002295', '002022', '300085', '000975', '603101', '603225', '603359', '002528', '002305', '000610', '002334', '000671', '002805', '300279', '603926', '300015', '002774', '300355', '601949', '601939', '002135', '600168', '603799', '300365', '000153', '300696', '001965', '002877', '601789', '603798', '300259', '601163', '600966', '600248', '002131', '002078', '603536', '600023', '600801', '300449', '300077', '603226', '002261', '603063', '600997', '603196', '600996', '601838', '601021', '300593', '601188', '000776', '000061', '300589', '603567', '300575', '300549', '002741', '600187', '600362', '600149', '300505', '600035', '600029', '600060', '300112', '601111', '300695', '000420', '002174', '002226', '300617', '002501', '002920', '603768', '000683', '600389', '600926', '300466', '002835', '002486', '300585', '002686', '603103', '002264', '300722', '002204', '000581', '603388', '300124', '600585', '002428', '603922', '603458', '603298', '002211', '000416', '603387', '603788', '600802', '600262', '002154', '603999', '300612', '601777', '600812', '300336', '002628', '000897', '600247', '002484', '600305', '601877', '000695', '002422', '603129', '601878', '300011', '002790', '600395', '601198', '600007', '002820', '002128', '600123', '002801', '600269', '000778', '000582', '000981', '300025', '002506', '300035', '000987', '603000', '601669', '600287', '603320', '300478', '300039', '300609', '600070', '600099', '300521', '601186', '000780', '002483', '000411', '300525', '000913', '600548', '603882', '002351', '000709', '300545', '000637', '002734', '603060', '002718', '603725', '002049', '600909', '600449', '603726', '300418', '000782', '000552', '000488', '300403', '000418', '601788', '601098', '603757', '603589', '300648', '603712', '300275', '300625', '600900', '600519', '600565', '601015', '000669', '000623', '000528', '002708', '002511', '600135', '300453', '603199', '601618', '601919', '002424', '000518', '001696', '600816', '600831', '002149', '600844', '601288', '002003', '002629', '000686', '000878', '002189', '300510', '002783', '600017', '002565', '600660', '600216', '600676', '000158', '600995', '002858', '002719', '002671', '000089', '603113', '603861', '603313', '603980', '603077', '600463', '600871', '000708', '603090', '600116', '601996', '002367', '600894', '600984', '603022', '300165', '000529', '603477', '300470', '300147', '002762', '603385', '300174', '002831', '000521', '603701', '300573', '600477', '002688', '002374', '601886', '600352', '002735', '000636', '601158', '002057', '002011', '300552', '300023', '600811', '002499', '600846', '300531', '600830', '300405', '600019', '002811', '600717', '300193', '002673', '002649', '002337', '300427', '002091', '300151', '002505', '002825', '002222', '603323', '002751', '300483', '002577', '600697', '002564', '002497', '600396', '600981', '600368', '600058', '603779', '002288', '002817', '300235', '300214', '601633', '603017', '300061', '002855', '000988', '002627', '300429', '600643', '600725', '002766', '000550', '300158', '000633', '002443', '002768', '600312', '002442', '000837', '603021', '601113', '603885', '000679', '601901', '600398', '600376', '603316', '600597', '000599', '000150', '600839', '600694', '601918', '300679', '002330', '300242', '000966', '000739', '002681', '002173', '000791', '002328', '600744', '600724', '002693', '600385', '603978', '002299', '600736', '000100', '600276', '002234', '002404', '000951', '000753', '603668', '603855', '601169', '002823', '600073', '300265', '002287', '600027', '600525', '601928', '601011', '601108', '603903', '000587', '600036', '300426', '002240', '601139', '603086', '603968', '002793', '600737', '300640', '300538', '300208', '603011', '603131', '002349', '300050', '000517', '603819', '000042', '600231', '601179', '000563', '300387', '603585', '601555', '000425', '002090', '002763', '000719', '600331', '600537', '603339', '002238', '000557', '000592', '600999', '601668', '002862', '002459', '002400', '600369', '002050', '600379', '600635', '002094', '601333', '603676', '300033', '600498', '600284', '002133', '300584', '002558', '600836', '300610', '300153', '600892', '603041', '300100', '000060', '002402', '000937', '000665', '600823', '600638', '002087', '603355', '002638', '603896', '601898', '300495', '600965', '601088', '000726', '300247', '002614', '601326', '600508', '000965', '300120', '600026', '603797', '603933', '002757', '300518', '002040', '600936', '603758', '603737', '300649', '600588', '600783', '603269', '600265', '601328', '600502', '600178', '002360', '300082', '601377', '002375', '603006', '600182', '002156', '002574', '000917', '002243', '002453', '002393', '000007', '600493', '300592', '000876', '603128', '601390', '002586', '002482', '601002', '002723', '300626', '002870', '300513', '300440', '002479', '300658', '601012', '603331', '600015', '000402', '002643', '603360', '300041', '002461', '603167', '002706', '300414', '300459', '600383', '000858', '000821', '603976', '000860', '600064', '300069', '603878', '300663', '600179', '000408', '002728', '002435', '002890', '603699', '002906', '300664', '000576', '300191', '000999', '603656', '002624', '300393', '600563', '603998', '603959', '603955', '603939', '603887', '603880', '603843', '603825', '603822', '603690', '603689', '603667', '603659', '603606', '603603', '603602', '603598', '603538', '603520', '603508', '603500', '603398', '603393', '603318', '603315', '603309', '603222', '603159', '603108', '603066', '603033', '603030', '601998', '601997', '601988', '601818', '601766', '601619', '601595', '601579', '601166', '601128', '601107', '601000', '600987', '600982', '600973', '600970', '600960', '600959', '600886', '600880', '600877', '600866', '600857', '600856', '600807', '600798', '600795', '600794', '600790', '600784', '600777', '600764', '600759', '600753', '600751', '600745', '600743', '600735', '600734', '600733', '600710', '600701', '600682', '600678', '600674', '600671', '600666', '600664', '600663', '600653', '600641', '600615', '600614', '600611', '600592', '600575', '600568', '600546', '600515', '600510', '600490', '600485', '600481', '600480', '600425', '600423', '600408', '600401', '600399', '600393', '600382', '600367', '600336', '600335', '600318', '600309', '600290', '600270', '600266', '600257', '600255', '600241', '600226', '600221', '600217', '600212', '600209', '600189', '600170', '600165', '600163', '600158', '600150', '600148', '600145', '600133', '600128', '600086', '600084', '600076', '600069', '600052', '600051', '600033', '600028', '600022', '600018', '300665', '300662', '300659', '300647', '300586', '300578', '300517', '300506', '300491', '300464', '300455', '300441', '300413', '300411', '300409', '300354', '300337', '300328', '300325', '300317', '300312', '300290', '300280', '300266', '300254', '300240', '300238', '300229', '300225', '300200', '300198', '300190', '300187', '300173', '300149', '300146', '300126', '300103', '300090', '300089', '300086', '300080', '300071', '300067', '300064', '300056', '300049', '300038', '300032', '300016', '300004', '002872', '002866', '002861', '002857', '002839', '002799', '002778', '002770', '002765', '002739', '002729', '002726', '002724', '002721', '002699', '002692', '002669', '002662', '002661', '002656', '002654', '002653', '002650', '002647', '002622', '002619', '002610', '002609', '002607', '002601', '002592', '002584', '002580', '002578', '002532', '002520', '002515', '002502', '002489', '002477', '002464', '002457', '002454', '002451', '002450', '002447', '002437', '002423', '002413', '002406', '002384', '002373', '002366', '002358', '002357', '002318', '002312', '002309', '002301', '002283', '002274', '002266', '002263', '002260', '002259', '002256', '002252', '002239', '002221', '002219', '002210', '002206', '002198', '002187', '002172', '002168', '002163', '002161', '002150', '002147', '002143', '002129', '002122', '002121', '002113', '002103', '002098', '002089', '002082', '002075', '002073', '002072', '002071', '002069', '002067', '002066', '002059', '002051', '002047', '002035', '002018', '002005', '002002', '000962', '000961', '000939', '000930', '000922', '000919', '000912', '000903', '000900', '000890', '000889', '000882', '000861', '000851', '000826', '000825', '000812', '000800', '000796', '000793', '000779', '000766', '000757', '000723', '000713', '000711', '000666', '000652', '000630', '000616', '000606', '000593', '000591', '000590', '000584', '000566', '000564', '000548', '000540', '000539', '000534', '000526', '000523', '000506', '000422', '000415', '000401', '000157', '000156', '000078', '000063', '000038', '000035', '000034', '000029', '000027', '000022', '000008', '603203', '002828', '600703', '600897', '000538', '603208', '002380', '002159', '002028', '002529', '603787', '002227', '600587', '300072', '600507', '000668', '000662', '601311', '601231', '600061', '600000', '002324', '002522', '300630', '600773', '603266', '300539', '300176', '600761', '601567', '600328', '000090', '600817', '603223', '600406', '603776', '002407', '600306', '002200', '000559', '000338', '300057', '600101', '603871', '000729', '000567', '000929', '002284', '002545', '002186', '002300', '002425', '000012', '600919', '002171', '600172', '300307', '002652', '002340', '600908', '002363', '600327', '600115', '603421', '600757', '000762', '002015', '600098', '600550', '600782', '002105', '002344', '300201', '600509', '002544', '000802', '002512', '600642', '002130', '600153', '300637', '603038', '600805', '002356', '603919', '000533', '002034', '600350', '600687', '002712', '000421', '600200', '600636', '300042', '601019', '600390', '600091', '000650', '603055', '300346', '000685', '000905', '600428', '300530', '600121', '300161', '600469', '603707', '603985', '000883', '601965', '000159', '600567', '603996', '600246', '002535', '002792', '600818', '000558', '603816', '000750', '300446', '002481', '600458', '000069', '000537', '601368', '600016', '000690', '300224', '002042', '603993', '002455', '600252', '002178', '002850', '000969', '000687', '600039', '603303', '600599', '601010', '600500', '002560', '603258', '601200', '002372', '000005', '002561', '002658', '603826', '300515', '600176', '601608', '603833', '300172', '002473', '601991', '000062', '000026', '300401', '002060', '300305', '300347', '600009', '000509', '600159', '300048', '300141', '000514', '600623', '600579', '603601', '603037', '600658', '300309', '002868', '002498', '002623', '002387', '000691', '603333', '600698', '601727', '600850', '600683', '600730', '600486', '603566', '300144', '600769', '000423', '600825', '002441', '000667', '601099', '600556', '002253', '300489', '600021', '300631', '000722', '002378', '600882', '000419', '002191', '002596', '600467', '601828', '002755', '603283', '600713', '300234', '600675', '300443', '000767', '603518', '601018', '002403', '002031', '000703', '002809', '600978', '603330', '600054', '600917', '603777', '600608', '600873', '300345', '002166', '600606', '000788', '600616', '000973', '300321', '600711', '600307', '600820', '300005', '000899', '000409', '600242', '600146', '000989', '600822', '603963', '300438', '000957', '600117', '300022', '600731', '002056', '300641', '300128', '300223', '603611', '002583', '002722', '600977', '300501', '002195', '600267', '600096', '600191', '300091', '300181', '600078', '600848', '600280', '300291', '603669', '002750', '002352', '600652', '002663', '002521', '600747', '300484', '300066', '600969', '300108', '002563', '600127', '002271', '002345', '600518', '000692', '600106', '002748', '300651', '603100', '603158', '600285', '000813', '000589', '000972', '600110', '002915', '600665', '000659', '002242', '000536', '300014', '600835', '002533', '002421', '000504', '000968', '002444', '002908', '300692', '300382', '603618', '000809', '300019', '600706', '002666', '600648', '601933', '600809', '002471', '000731', '300024', '300332', '002388', '600705', '300318', '000978', '603555', '600192', '000404', '002602', '600292', '600605', '603366', '600552', '002576', '300669', '600975', '002026', '300628', '601958', '002254', '000673', '002099', '000918', '002246', '300197', '002620', '000777', '600008', '601007', '300270', '300260', '002541', '600691', '600059', '002302', '600219', '000838', '300018', '300384', '000598', '002585', '601366', '300138', '600375', '600057', '000785', '601888', '300221', '002064', '000721', '002779', '300434', '600063', '002411', '603979', '000982', '600162', '600377', '300135', '600281', '300068', '600738', '000018', '000430', '603633', '300098', '601866', '000543', '002364', '601968', '600688', '603183', '002796', '600488', '603535', '002826', '600177', '002730', '300498', '601028', '600749', '600814', '600169', '600861', '300482', '300095', '002573', '600719', '601588', '000055', '300391', '600993', '600824', '600644', '300217', '300273', '300284', '000619', '000839', '600037', '002037', '600549', '600220', '603035', '000736', '000909', '000551', '603617', '300171', '002803', '002310', '002332', '002282', '601611', '600863', '600803', '002571', '002776', '600528', '600586', '600397', '000531', '603116', '603909', '601857', '002144', '600415', '600512', '000002', '600875', '002797', '002827', '600657', '300097', '000752', '300105', '300087', '002448', '000895', '600543', '603883', '600301', '002145', '603126', '002800', '000702', '603727', '600166', '002311', '000886', '603665', '000829', '002672', '601199', '002495', '002272', '300547', '600388', '000400', '000620', '300133', '300092', '600979', '300407', '603789', '000833', '600496', '002061', '600864', '000498', '600094', '600538', '300437', '000783', '000859', '603177', '600750', '603456', '000554', '002928', '603901', '601616', '002317', '000727', '600639', '002611', '002683', '600570', '603616', '300008', '603568', '002304', '601800', '002325', '000828', '300021', '601515', '300261', '300319', '000004', '002526', '600156', '002382', '300185', '300220', '600572', '600356', '002410', '600122', '002463', '300572', '002637', '002275', '600210', '002430', '600629', '603877', '603444', '603025', '600650', '600696', '002101', '600225', '002201', '600815', '600532', '002342', '600693', '300726', '000068', '300205', '002591', '300194', '600834', '002142', '600346', '002595', '300215', '600800', '300257', '600139', '600595', '600746', '002167', '600161', '000040', '002280', '300218', '600081', '002054', '603519', '002276', '300239', '300210', '603766', '600838', '600827', '300196', '300421', '000541', '002557', '002537', '000888', '300111', '600256', '300376', '002705', '002392', '002114', '002359', '600692', '603328', '600620', '002004', '300636', '300204', '600448', '000718', '603588', '600505', '002810', '601020', '002742', '603377', '603117', '603858', '002615', '600386', '300127', '600409', '002291', '300202', '002152', '300461', '002562', '000600', '002289', '002635', '002812', '600787', '300607', '300013', '002775', '000570', '601808', '300237', '002593', '000166', '002630', '601126', '002329', '002076', '000949', '603238', '002269', '000530', '600444', '002761', '300656', '300169', '300683', '601929', '002046', '601177', '600067', '002140', '601882', '300145', '000553', '300620', '000980', '603906', '000428', '000622', '002433', '600617', '600785', '603268', '000751', '002438', '600774', '603023', '600883', '600236', '600319', '300400', '002468', '600545', '002682', '600421', '300206', '002213', '600025', '002182', '601388', '600240', '002258', '600363', '600088', '300639', '002556', '000959', '000607', '600079', '600499', '600012', '600577', '002675', '600939', '300371', '300043', '002292', '002807', '000716', '002884', '603696', '600403', '603389', '600681', '600470', '600233', '603569', '002120', '002132', '600630', '002164', '300094', '603178', '603716', '000963', '600235', '300167', '002308', '603605', '000545', '603001', '300313', '002780', '000698', '300314', '300118', '002348', '603186', '002418', '002086', '600566', '600708', '002901', '000601', '002293', '002215', '601599', '300157', '600668', '603558', '002033', '601900', '002385', '603619', '600299', '000885', '603991', '601038', '603036', '002598', '300622', '000952', '600199', '000795', '300102', '002207', '002678', '603711', '002277', '000927', '600339', '000798', '300289', '300164', '000990', '600452', '002298', '002452', '000688', '300709', '002697', '002183', '002196', '002335', '002420', '300486', '300113', '300233', '002631', '002756', '300163', '002153', '002667', '002320', '002381', '300655', '002136', '300272', '000612', '300044', '600748', '002125', '300131', '300329', '600889', '300248', '002225', '300132', '601718', '300140', '300402', '002472', '300676', '300282', '002170', '600152', '300476', '300001', '002616', '002905', '603806', '300430', '002228', '300300', '002408', '300642', '600726', '300633', '002176', '002296', '002386', '600495', '000850', '603007', '601717', '300255', '600843', '600780', '300036', '600104', '002745', '300303', '600329', '600400', '603169', '300142', '600232', '601058', '002445', '603227', '300480', '600380', '600626', '600111', '600723', '600651', '002043', '600089', '002096', '600105', '300422', '000507', '603580', '600976', '600821', '300075', '600633', '000677', '002426', '603908', '300385', '600075', '300028', '600594', '601558', '300027', '002617', '600297', '002169', '000868', '002432', '000017', '600222', '600819', '300269', '300358', '000806', '000520', '603800', '300063', '600082', '000617', '600006', '300448', '000863', '300129', '002492', '300159', '002572', '002791', '000036', '002327', '002786', '000544', '300288', '600992', '002746', '603898', '002701', '300211', '002852', '603989', '002062', '002605', '002838', '000758', '600171', '600601', '000701', '600429', '002039', '000967', '603020', '000792', '601801', '601607', '000088', '601228', '300059', '000880', '600011', '603166', '601106', '600589', '000920', '600083', '002020', '300283', '000998', '600272', '002538', '002677', '300226', '002570', '002504', '000887', '600684', '300125', '600513', '600582', '002048', '603600', '600103', '300507', '002588', '002063', '600108', '002555', '300703', '600479', '000403', '300533', '603380', '300262', '002715', '300119', '000955', '002551', '002919', '600551', '603637', '600056', '600649', '002126', '600828', '300062', '002023', '603233', '002641', '002398', '603003', '300298', '300532', '300110', '300243', '000737', '300258', '600195', '600527', '300339', '600583', '603660', '600072', '603728', '000657', '600980', '002886', '600186', '603708', '000625', '300065', '002798', '603028', '002383', '300571', '600227', '600506', '600613', '000009', '300170', '600573', '603488', '600695', '002550', '601117', '300370', '002107', '000006', '000030', '300397', '300143', '002202', '600353', '000609', '000815', '002065', '603326', '002840', '600010', '002918', '600741', '601008', '000568', '300327', '002199', '002361', '000902', '603416', '600767', '600322', '300168', '600183', '000028', '601222', '600716', '300315', '300121', '000892', '600234', '300175', '603228', '300569', '300406', '300264', '002165', '002354', '000560', '601218', '002232', '002244', '300338', '300331', '603012', '603018', '601086', '600325', '300580', '002822', '300457', '002687', '002079', '600517', '600439', '300055', '000911', '600895', '600387', '600420', '000613', '603823', '002478', '002493', '300691', '600826', '600775', '002157', '000901', '600223', '603987', '600361', '002434', '600742', '300139', '000979', '000948', '000799', '600867', '600268', '603069', '002709', '600998', '603556', '002083', '300445', '600860', '600095', '300232', '000572', '600655', '000155', '300360', '002247', '002539', '300093', '000099', '300605', '603345', '600114', '000016', '600273', '300342', '002518', '002732', '002027', '300570', '603096', '002542', '603918', '000501', '000417', '600891', '600766', '300435', '600475', '601700', '600768', '300553', '603860', '000836', '002690', '601899', '300286', '600557', '601600', '002554', '002019', '300616', '603579', '000759', '000546', '600466', '603977', '300277', '002214', '600890', '002249', '600792', '002618', '002190', '002294', '300116', '002923', '600197', '300721', '000632', '300212', '603608', '601339', '002771', '600679', '001979', '002731', '002458', '002255', '603056', '000011', '600438', '600990', '603505', '002436', '000056', '000502', '300417', '300026', '002262', '002702', '600131', '002876', '300040', '603838', '300420', '002503', '002644', '002534', '000608', '603988', '300096', '000661', '603717', '000301', '300252', '000921', '300621', '002743', '300199', '000933', '000516', '600419', '002847', '002758', '603969', '002469', '600129', '600459', '300073', '300485', '600661', '600778', '002306', '603198', '603081', '000985', '300246', '002248', '300546', '000045', '600662', '002124', '000014', '002009', '002316', '300627', '300154', '600259', '300577', '600130', '603139', '000786', '300359', '300386', '603615', '300415', '300432', '300587', '600647', '600602', '603085', '002331', '000426', '603008', '000915', '601989', '002212', '603997', '601233', '300375', '000597', '000680', '002119', '002074', '600295', '300051', '300712', '002044', '600576', '002010', '000663', '002394', '002590', '600558', '000635', '300362', '002045', '300326', '002772', '600707', '300029', '002625', '300053', '600885', '000025', '002519', '002323', '601969', '603677', '300334', '002285', '002188', '600677', '600119', '300296', '600355', '002273', '603528', '600501', '600476', '002095', '002077', '002711', '600562', '300084', '002674', '002657', '000970', '600961', '000023', '300526', '603368', '603043', '600378', '002695', '600770', '300182', '002106', '600523', '000705', '603005', '300468', '002104', '002245', '300729', '300244', '600004', '300219', '002347', '300425', '000603', '002760', '600462', '300222', '600289', '002703', '600622', '002548', '000760', '603839', '002488', '002859', '002787', '601992', '600526', '600756', '600157', '000032', '300294', '000595', '600986', '300688', '002523', '300519', '002597', '603609', '000048', '600637', '600211', '300106', '300502', '600612', '000628', '300566', '300456', '600858', '300320', '300367', '002111', '601500', '300567', '300508', '000820', '603311', '300611', '002684', '600138', '300162', '002092', '002664', '603818', '002645', '002582', '601127', '300364', '600201', '603630', '300600', '002655', '603165', '601952', '300006', '601811', '300543', '300581', '300304', '603859', '300251', '601212', '600624', '300363', '002634', '002203', '002303', '300034', '603232', '300477', '002845', '300192', '002139', '002343', '601799', '600540', '002307', '300228', '603686', '300088', '002552', '600460', '002322', '600903', '603869', '600337', '300054', '300529', '600482', '600531', '300601', '002777', '002636', '002608', '000586', '002613', '002377', '300002', '300408', '002867', '000524', '600261', '002389', '600590', '603002', '300010', '002600', '000893', '002713', '603200', '600097', '002648', '002785', '002714', '300184', '300117', '300047', '603678', '300606', '603088', '300007', '000519', '600416', '002376', '300081', '600580', '600351', '002660', '603517', '300471', '002341', '002632', '000565', '300178', '300278', '300475', '002633', '002286', '300179', '601798', '600202', '300690', '600238', '002346', '300416', '002717', '300490', '300500', '600729', '002220', '002707', '000908', '000049', '600712', '300037', '000995', '300558', '603661', '603358', '600258', '300596', '002279', '002606', '002112', '600456', '002251', '000819', '000712', '600278', '002081', '601226', '002465', '300285', '300535', '000926', '300076', '002336', '002639', '002290', '300045', '002297', '000065', '603990', '002589', '300137', '600581', '000715', '600360', '600847', '300166', '600865', '000997', '000031', '300424', '603960', '600765', '600491', '000697', '600359', '300177', '002491', '603729', '300350', '300256', '000670', '300697', '300685', '300562', '601118', '000923', '002281', '300474', '002659', '002417', '603970', '002470', '600315', '603595', '002231', '603039', '603900', '300156', '000823', '300390', '000020', '002907', '600206', '002824', '002058', '000505', '300335', '300568', '300493', '600151', '002041', '603029', '300576', '603239', '000503', '300645', '002053', '300479', '600167', '000807', '600779', '603027', '600618', '603179', '002462', '002524', '002490', '600685', '603338', '002581', '600184', '603181', '300629', '002080', '600715', '600208', '000856', '603866', '002567', '600763', '600511', '300394', '000710', '603197', '600714', '603010', '000096', '300281', '002676', '603466', '002507', '600074', '300557', '002727', '000021', '300447', '002531', '002725', '600859', '000596', '603698', '601677', '601216', '002016', '300499', '300428', '600893', '300351', '600732', '603180', '600310', '300613', '600055', '300009', '600535', '002416', '600771', '002599', '300623', '600392', '300287', '600345', '600879', '603886', '000801', '300555', '603938', '002160', '300520', '002621', '300297', '000672', '000010', '603308', '300012', '601689', '002405', '300603', '600085', '002612', '300671', '603507', '002474', '000585', '600446', '300109', '002151', '300404', '600718', '600118', '600559', '300183', '002903', '002569', '002841', '300209', '300207', '002898', '000755', '002829', '000720', '000693', '000938', '603889', '603527', '002575', '600569', '600876', '000019', '603040', '002821', '600962', '002604', '000831', '002427', '000877', '603848', '600321', '603730', '000555', '300323', '603386', '002013', '603636', '300590', '300516', '603337', '000561', '000681', '300619', '002134', '000810', '600343', '002368', '002773', '002815', '002833', '600571', '603658', '603808', '300078', '002217', '600699', '000571', '000707', '300353', '002185', '300330', '300344', '002694', '603306', '002268', '002414', '603801', '603738', '600862', '000639', '002250', '002646', '601137', '300431', '002910', '600372', '002527', '002716', '002696', '603986', '603803', '603336', '300556', '300708', '002179', '600673', '600845', '002902', '300115', '002409', '300046', '002138', '300271', '000066', '002419', '002668', '002836', '002449', '300373', '300324', '002025', '002036', '603515', '002118', '300236', '600489', '300523', '300439', '600560', '002813', '300083', '601360', '600455', '300527', '600689', '600435', '600391', '300263', '600313', '600371', '002795', '600855', '600316', '000738', '300017', '002371', '603019', '300253', '002008', '600520', '600555', '600896', '000615', '300188', '603937', '600311', '300383', '002480', '002913', '603168', '300548', '300433', '000626', '603899', '600874', '600547', '300308', '300451', '300031', '002155', '000768', '002007', '300114', '002180', '600198', '300588', '600967', '603319', '002439', '600988', '603501', '300458', '300604', '300410', '300101', '300306', '002241', '300739', '300398', '300316', '300497', '600193', '300583', '600038', '603083', '002100', '600760', '002865', '600598', '300514', '002237', '603127', '300136', '603188', '300392', '300195', '300444', '300654', '300672', '603813', '603363', '600870', '603626', '600293', '300352', '000816', '600271', '300302', '002475', '300706', '600354', '300267', '300104', '000638', '000977', '600754', '000070', '002012', '300311', '002738', '000605', '002642', '002085', '002456', '002223', '300550', '600702', '600539', '300666', '002880', '002568', '002516', '603078', '300661', '002916', '300675', '603189', '601069', '300369', '002769', '002108', '002496', '300742', '000950', '000629', '000511', '603596', '603348', '603259', '603013', '600806', '600432', '300743']



my_code_data_list=[]
my_code_data=pd.DataFrame()


basic_url='http://m.emoney.cn/sosoSD/test_pub.html?sc=%s'
new_url_list=[]
for index,value in enumerate(code_list):
    new_url=basic_url % value
    #print (new_url)
    new_url_list.append(new_url)


driver1 = simulator_driver()
driver2 = mobile_driver()
code_rank=[]

num=1
i=num
#for index,value in enumerate(new_url_list):
for aaa in range(len(new_url_list)):
    tmp_data={}
    url=new_url_list[aaa+num-1]
    if i>4000:#这个网站不能一次性过多访问,,因此差不多200次,停下来一下
        break
    tmp= i%2
    if tmp == 0:
        driver1.get(url)
        time.sleep(1.1)
        try:
            tmp_code_name=driver1.find_elements_by_xpath ('//*[@id="TestPubSN"]/span[1]')[0].text
            rank=driver1.find_elements_by_xpath ('//*[@id="TestPubSN"]/span[2]')[0].text
            print ('当前股票 %s 股票名字 %s 评级为: %s .............. i =%d , i的余数为 %d' % (url[-6:],tmp_code_name,rank,i,tmp))
            code_rank.append(rank)
            tmp_data['code_rank']=rank
        except Exception as e:
            print(e)
            print('当前股票 %s 没有获取成功' % url[-6:])
            code_rank.append('000') 
            tmp_data['code_rank']='000'
    else:
        driver2.get(url)
        time.sleep(1.1)
        try:
            tmp_code_name=driver2.find_elements_by_xpath ('//*[@id="TestPubSN"]/span[1]')[0].text
            rank=driver2.find_elements_by_xpath ('//*[@id="TestPubSN"]/span[2]')[0].text
            print ('当前股票 %s 股票名字 %s 评级为: %s .............. i =%d , i的余数为 %d' % (url[-6:],tmp_code_name,rank,i,tmp))
            code_rank.append(rank)
            tmp_data['code_rank']=rank
        except Exception as  e:
            print(e)
            print('当前股票 %s 没有获取成功' % url[-6:])
            code_rank.append('000') 
            tmp_data['code_rank']='000'
    my_code_data_list.append(tmp_data)
    i +=1

print ("len(code_rank) = %d " % len(code_rank))



driver1.quit()
driver2.quit()


